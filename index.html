<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basketball Q4 Predictor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 24px;
            color: #ff6b35;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .view-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .view-toggle button {
            flex: 1;
            padding: 12px;
            border: none;
            background: #2a2a3e;
            color: #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
        }

        .view-toggle button.active {
            background: #ff6b35;
            color: #1a1a2e;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .team-names {
            background: #2a2a3e;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .team-name-row {
            margin-bottom: 12px;
        }

        .team-name-row:last-child {
            margin-bottom: 0;
        }

        .team-name-row label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #a0a0a0;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .team-name {
            width: 100%;
            padding: 12px;
            background: #1a1a2e;
            border: 2px solid #3a3a4e;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .team-name:focus {
            outline: none;
            border-color: #ff6b35;
        }

        .game-table {
            background: #2a2a3e;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .team-row {
            margin-bottom: 20px;
        }

        .team-row:last-child {
            margin-bottom: 0;
        }

        .team-label {
            font-size: 14px;
            font-weight: 600;
            color: #ff6b35;
            margin-bottom: 10px;
        }

        .quarters {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .quarter-input-wrapper {
            text-align: center;
        }

        .quarter-input-wrapper label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #a0a0a0;
            font-weight: 600;
        }

        .quarter-input {
            width: 100%;
            padding: 12px;
            background: #1a1a2e;
            border: 2px solid #3a3a4e;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 18px;
            text-align: center;
            transition: all 0.3s;
        }

        .quarter-input:focus {
            outline: none;
            border-color: #ff6b35;
        }

        .predictions {
            background: #2a2a3e;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .prediction-row {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #3a3a4e;
        }

        .prediction-row:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .prediction-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .prediction-team {
            font-weight: 600;
            color: #e0e0e0;
        }

        .prediction-values {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .prediction-item {
            flex: 1;
            text-align: center;
        }

        .prediction-label {
            font-size: 11px;
            color: #a0a0a0;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .prediction-value {
            font-size: 24px;
            font-weight: 700;
            color: #ff6b35;
            margin-bottom: 5px;
        }

        .confidence {
            display: inline-block;
            padding: 3px 8px;
            background: #4ecca3;
            color: #1a1a2e;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 700;
        }

        .button-container {
            display: flex;
            gap: 10px;
        }

        .predict-btn {
            flex: 1;
            padding: 15px;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            border: none;
            border-radius: 12px;
            color: #1a1a2e;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .predict-btn:active {
            transform: scale(0.98);
        }

        .reset-btn {
            flex: 0 0 auto;
            padding: 15px 25px;
            background: #2a2a3e;
            border: none;
            border-radius: 12px;
            color: #e0e0e0;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reset-btn:hover {
            background: #3a3a4e;
        }

        .reset-btn:active {
            transform: scale(0.98);
        }

        .save-btn {
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            background: #4ecca3;
            border: none;
            border-radius: 8px;
            color: #1a1a2e;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .save-btn:active {
            transform: scale(0.98);
        }

        .saved-games {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .game-card {
            background: #2a2a3e;
            border-radius: 12px;
            padding: 15px;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #3a3a4e;
        }

        .game-date {
            font-size: 12px;
            color: #a0a0a0;
        }

        .team-result {
            margin-bottom: 15px;
            padding: 12px;
            background: #1a1a2e;
            border-radius: 8px;
        }

        .team-result:last-child {
            margin-bottom: 0;
        }

        .team-result-header {
            font-weight: 600;
            color: #e0e0e0;
            margin-bottom: 8px;
        }

        .team-scores {
            color: #a0a0a0;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .prediction-results {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .prediction-result-item {
            flex: 1;
            background: #2a2a3e;
            padding: 8px;
            border-radius: 6px;
            text-align: center;
        }

        .prediction-result-label {
            font-size: 10px;
            color: #a0a0a0;
            text-transform: uppercase;
            margin-bottom: 3px;
        }

        .prediction-result-value {
            font-size: 16px;
            color: #ff6b35;
            font-weight: 600;
        }

        .verification-buttons {
            display: flex;
            gap: 5px;
        }

        .verified {
            flex: 1;
            padding: 6px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .verified:hover {
            opacity: 0.8;
        }

        .verified.correct {
            background: #4ecca3;
            color: #1a1a2e;
        }

        .verified.incorrect {
            background: #ee6c4d;
            color: #1a1a2e;
        }

        .verified.unverified {
            background: #3a3a4e;
            color: #a0a0a0;
        }

        .no-games {
            text-align: center;
            padding: 40px;
            color: #a0a0a0;
        }

        .delete-btn {
            background: #ee6c4d;
            color: #1a1a2e;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÄ Q4 Predictor</h1>

        <div class="view-toggle">
            <button id="predictBtn" class="active">Predict</button>
            <button id="historyBtn">History</button>
        </div>

        <div id="predictPage" class="page active">
            <div class="team-names">
                <div class="team-name-row">
                    <label>Team 1</label>
                    <input type="text" class="team-name" id="team1Name" placeholder="Enter team name">
                </div>
                <div class="team-name-row">
                    <label>Team 2</label>
                    <input type="text" class="team-name" id="team2Name" placeholder="Enter team name">
                </div>
            </div>

            <div class="game-table">
                <div class="team-row">
                    <div class="team-label">Team 1 Scores</div>
                    <div class="quarters">
                        <div class="quarter-input-wrapper">
                            <label>Q1</label>
                            <input type="number" class="quarter-input" id="team1Q1" min="0">
                        </div>
                        <div class="quarter-input-wrapper">
                            <label>Q2</label>
                            <input type="number" class="quarter-input" id="team1Q2" min="0">
                        </div>
                        <div class="quarter-input-wrapper">
                            <label>Q3</label>
                            <input type="number" class="quarter-input" id="team1Q3" min="0">
                        </div>
                    </div>
                </div>

                <div class="team-row">
                    <div class="team-label">Team 2 Scores</div>
                    <div class="quarters">
                        <div class="quarter-input-wrapper">
                            <label>Q1</label>
                            <input type="number" class="quarter-input" id="team2Q1" min="0">
                        </div>
                        <div class="quarter-input-wrapper">
                            <label>Q2</label>
                            <input type="number" class="quarter-input" id="team2Q2" min="0">
                        </div>
                        <div class="quarter-input-wrapper">
                            <label>Q3</label>
                            <input type="number" class="quarter-input" id="team2Q3" min="0">
                        </div>
                    </div>
                </div>
            </div>

            <div id="predictionsContainer"></div>

            <div class="button-container">
                <button class="predict-btn" onclick="calculatePrediction()">Calculate Prediction</button>
                <button class="reset-btn" onclick="resetPrediction()">Reset</button>
            </div>
            <div id="saveButtonContainer"></div>
        </div>

        <div id="historyPage" class="page">
            <div id="savedGames" class="saved-games"></div>
        </div>
    </div>

    <script>
        let currentPrediction = null;

        function calculateTeamPrediction(q1, q2, q3) {
            let max = Math.max(q1, q2, q3);
            let min = Math.min(q1, q2, q3);

            if (q1 >= q2 && q2 >= q3) {
              max = Math.ceil(max + max / 2 - 1);
              min = min - 3;
              // max = 25;
            }
            max = max + 0.5;
            if (q1 <= q2 && q2 <= q3) {
              min = Math.floor(min + min / 2 - 3);
              // min = 17;
            }
            min = min - 0.5;            
            
            const under = q1 + q2 + q3 + max;
            const over = q1 + q2 + q3 + min;
            
            return {
                under: { total: under, confidence: 85 },
                over: { total: over, confidence: 70 }
            };
        }

        function calculatePrediction() {
            const team1Q1 = parseInt(document.getElementById('team1Q1').value) || 0;
            const team1Q2 = parseInt(document.getElementById('team1Q2').value) || 0;
            const team1Q3 = parseInt(document.getElementById('team1Q3').value) || 0;
            const team2Q1 = parseInt(document.getElementById('team2Q1').value) || 0;
            const team2Q2 = parseInt(document.getElementById('team2Q2').value) || 0;
            const team2Q3 = parseInt(document.getElementById('team2Q3').value) || 0;

            const team1Name = document.getElementById('team1Name').value || 'Team 1';
            const team2Name = document.getElementById('team2Name').value || 'Team 2';

            const team1Result = calculateTeamPrediction(team1Q1, team1Q2, team1Q3);
            const team2Result = calculateTeamPrediction(team2Q1, team2Q2, team2Q3);

            const container = document.getElementById('predictionsContainer');
            container.innerHTML = `
                <div class="predictions">
                    <div class="prediction-row">
                        <div class="prediction-header">
                            <span class="prediction-team">${team1Name}</span>
                        </div>
                        <div class="prediction-values">
                            <div class="prediction-item">
                                <div class="prediction-label">Under</div>
                                <div class="prediction-value">${team1Result.under.total}</div>
                                <span class="confidence">${team1Result.under.confidence}%</span>
                            </div>
                            <div class="prediction-item">
                                <div class="prediction-label">Over</div>
                                <div class="prediction-value">${team1Result.over.total}</div>
                                <span class="confidence">${team1Result.over.confidence}%</span>
                            </div>
                        </div>
                    </div>
                    <div class="prediction-row">
                        <div class="prediction-header">
                            <span class="prediction-team">${team2Name}</span>
                        </div>
                        <div class="prediction-values">
                            <div class="prediction-item">
                                <div class="prediction-label">Under</div>
                                <div class="prediction-value">${team2Result.under.total}</div>
                                <span class="confidence">${team2Result.under.confidence}%</span>
                            </div>
                            <div class="prediction-item">
                                <div class="prediction-label">Over</div>
                                <div class="prediction-value">${team2Result.over.total}</div>
                                <span class="confidence">${team2Result.over.confidence}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            currentPrediction = {
                team1: team1Name,
                team2: team2Name,
                team1Scores: [team1Q1, team1Q2, team1Q3],
                team2Scores: [team2Q1, team2Q2, team2Q3],
                timestamp: new Date().toISOString()
            };

            document.getElementById('saveButtonContainer').innerHTML = 
                '<button class="save-btn" onclick="saveGame()">üíæ Save Game</button>';
        }

        function resetPrediction() {
            document.getElementById('team1Name').value = '';
            document.getElementById('team2Name').value = '';
            document.getElementById('team1Q1').value = '';
            document.getElementById('team1Q2').value = '';
            document.getElementById('team1Q3').value = '';
            document.getElementById('team2Q1').value = '';
            document.getElementById('team2Q2').value = '';
            document.getElementById('team2Q3').value = '';
            document.getElementById('predictionsContainer').innerHTML = '';
            document.getElementById('saveButtonContainer').innerHTML = '';
            currentPrediction = null;
        }

        function saveGame() {
            if (!currentPrediction) return;

            const games = JSON.parse(localStorage.getItem('basketballGames') || '[]');
            games.unshift({ 
                ...currentPrediction, 
                verified: { 
                    team1: { under: null, over: null },
                    team2: { under: null, over: null }
                }
            });
            localStorage.setItem('basketballGames', JSON.stringify(games));

            alert('Game saved successfully!');
            loadHistory();
        }

        function loadHistory() {
            const games = JSON.parse(localStorage.getItem('basketballGames') || '[]');
            const container = document.getElementById('savedGames');

            if (games.length === 0) {
                container.innerHTML = '<div class="no-games">No saved games yet</div>';
                return;
            }

            container.innerHTML = games.map((game, index) => {
                const team1Result = calculateTeamPrediction(game.team1Scores[0], game.team1Scores[1], game.team1Scores[2]);
                const team2Result = calculateTeamPrediction(game.team2Scores[0], game.team2Scores[1], game.team2Scores[2]);

                return `
                <div class="game-card">
                    <div class="game-header">
                        <div class="game-date">${new Date(game.timestamp).toLocaleString()}</div>
                        <button class="delete-btn" onclick="deleteGame(${index})">Delete</button>
                    </div>
                    
                    <div class="team-result">
                        <div class="team-result-header">${game.team1}</div>
                        <div class="team-scores">Q1: ${game.team1Scores[0]} | Q2: ${game.team1Scores[1]} | Q3: ${game.team1Scores[2]}</div>
                        <div class="prediction-results">
                            <div class="prediction-result-item">
                                <div class="prediction-result-label">Under</div>
                                <div class="prediction-result-value">${team1Result.under.total}</div>
                            </div>
                            <div class="prediction-result-item">
                                <div class="prediction-result-label">Over</div>
                                <div class="prediction-result-value">${team1Result.over.total}</div>
                            </div>
                        </div>
                        <div class="verification-buttons">
                            <span class="verified ${game.verified.team1.under === null ? 'unverified' : (game.verified.team1.under ? 'correct' : 'incorrect')}" 
                                  onclick="toggleVerification(${index}, 'team1', 'under')">
                                ${game.verified.team1.under === null ? 'U: ?' : (game.verified.team1.under ? 'U: ‚úì' : 'U: ‚úó')}
                            </span>
                            <span class="verified ${game.verified.team1.over === null ? 'unverified' : (game.verified.team1.over ? 'correct' : 'incorrect')}" 
                                  onclick="toggleVerification(${index}, 'team1', 'over')">
                                ${game.verified.team1.over === null ? 'O: ?' : (game.verified.team1.over ? 'O: ‚úì' : 'O: ‚úó')}
                            </span>
                        </div>
                    </div>

                    <div class="team-result">
                        <div class="team-result-header">${game.team2}</div>
                        <div class="team-scores">Q1: ${game.team2Scores[0]} | Q2: ${game.team2Scores[1]} | Q3: ${game.team2Scores[2]}</div>
                        <div class="prediction-results">
                            <div class="prediction-result-item">
                                <div class="prediction-result-label">Under</div>
                                <div class="prediction-result-value">${team2Result.under.total}</div>
                            </div>
                            <div class="prediction-result-item">
                                <div class="prediction-result-label">Over</div>
                                <div class="prediction-result-value">${team2Result.over.total}</div>
                            </div>
                        </div>
                        <div class="verification-buttons">
                            <span class="verified ${game.verified.team2.under === null ? 'unverified' : (game.verified.team2.under ? 'correct' : 'incorrect')}" 
                                  onclick="toggleVerification(${index}, 'team2', 'under')">
                                ${game.verified.team2.under === null ? 'U: ?' : (game.verified.team2.under ? 'U: ‚úì' : 'U: ‚úó')}
                            </span>
                            <span class="verified ${game.verified.team2.over === null ? 'unverified' : (game.verified.team2.over ? 'correct' : 'incorrect')}" 
                                  onclick="toggleVerification(${index}, 'team2', 'over')">
                                ${game.verified.team2.over === null ? 'O: ?' : (game.verified.team2.over ? 'O: ‚úì' : 'O: ‚úó')}
                            </span>
                        </div>
                    </div>
                </div>
            `}).join('');
        }

        function toggleVerification(index, team, type) {
            const games = JSON.parse(localStorage.getItem('basketballGames') || '[]');
            const current = games[index].verified[team][type];
            
            // Cycle through: null -> true -> false -> null
            if (current === null) {
                games[index].verified[team][type] = true;
            } else if (current === true) {
                games[index].verified[team][type] = false;
            } else {
                games[index].verified[team][type] = null;
            }
            
            localStorage.setItem('basketballGames', JSON.stringify(games));
            loadHistory();
        }

        function deleteGame(index) {
            const games = JSON.parse(localStorage.getItem('basketballGames') || '[]');
            games.splice(index, 1);
            localStorage.setItem('basketballGames', JSON.stringify(games));
            loadHistory();
        }

        document.getElementById('predictBtn').addEventListener('click', function() {
            document.getElementById('predictPage').classList.add('active');
            document.getElementById('historyPage').classList.remove('active');
            this.classList.add('active');
            document.getElementById('historyBtn').classList.remove('active');
        });

        document.getElementById('historyBtn').addEventListener('click', function() {
            document.getElementById('historyPage').classList.add('active');
            document.getElementById('predictPage').classList.remove('active');
            this.classList.add('active');
            document.getElementById('predictBtn').classList.remove('active');
            loadHistory();
        });

        loadHistory();
    </script>
</body>
</html>
